<div class="product">
  <div class="product-header">
    <h1 class="title">Productos</h1>
    <p class="description">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Fugiat repellendus eius autem.</p>
  </div>

  <div class="content">
    <div class="content-header" *appAppPermission="['admin']">
      <vt-button (onClick)="modalOpen.set(true)"><i-lucide [name]="addIcon()" size="18" class="lucide-icon" /> Nuevo Producto</vt-button>
    </div>

    @if(isLoadingList()){
      <vt-spinner class="list-spinner" [loaderText]="'Cargando datos...'"/>
    }@else {
      <data-table [data]="products()" [headers]="headers()" />
    }
  </div>
</div>

@if(modalOpen()){
  <vt-modal title="Nuevo Producto" [(open)]="modalOpen">
    <form class="modal-form" [formGroup]="productForm" (submit)="createProduct()">
      <vt-text-input inputLabel="Nombre Producto" formControlName="name">
        @if(productForm.get("name")?.hasError("required") && productForm.get("name")?.touched){
          <vt-error vt-error>Este campo es <strong>Obligatorio</strong></vt-error>
        }
      </vt-text-input>

      <vt-text-input inputLabel="SKU" formControlName="sku">
        @if(productForm.get("sku")?.hasError("required") && productForm.get("sku")?.touched){
          <vt-error>Este campo es <strong>Obligatorio</strong></vt-error>
        }
      </vt-text-input>

      <vt-text-input inputLabel="DescripciÃ³n" formControlName="description">
        @if(productForm.get("description")?.hasError("required") && productForm.get("description")?.touched){
          <vt-error vt-error>Este campo es <strong>Obligatorio</strong></vt-error>
        }
      </vt-text-input>

      <vt-button [disabled]="isCreating()">
        @if(isCreating()){ <vt-spinner class="insert-spinner" /> }
        Crear
      </vt-button>
    </form>
  </vt-modal>
}